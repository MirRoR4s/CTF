<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Embedded JavaScript templates &mdash; CTF 0.0 documentation</title>
      <link rel="stylesheet" href="../../../../../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../../../../../../../" id="documentation_options" src="../../../../../../../../../_static/documentation_options.js?v=44496db0"></script>
        <script src="../../../../../../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../../../index.html" class="icon icon-home">
            CTF
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">CTF-2023</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../TetCTF.html">TetCTF 2023</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../Lexington-Informatics-Tournament.html">Lexington Informatics Tournament CTF 2023</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../nullcon-HackIM-CTF-Goa.html">nullcon HackIM CTF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../CTFZone.html">CTFZone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../corCTF.html">corCTF 2023</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../tamu.html">TAMUctf 2023</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../nullcon-HackIM-CTF-Goa.html">nullcon HackIM CTF</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../../../index.html">CTF</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Embedded JavaScript templates<br/>


</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../../../_sources/source/2023/TetCTF/tetctf2023/container/images-services/src/node_modules/ejs/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="embedded-javascript-templates">
<h1>Embedded JavaScript templates<br/>
<a class="reference external" href="https://travis-ci.org/mde/ejs"><img alt="Build Status" src="https://img.shields.io/travis/mde/ejs/master.svg?style=flat" /></a>
<a class="reference external" href="https://david-dm.org/mde/ejs?type=dev"><img alt="Developing Dependencies" src="https://img.shields.io/david/dev/mde/ejs.svg?style=flat" /></a>
<a class="reference external" href="https://snyk.io/test/npm/ejs"><img alt="Known Vulnerabilities" src="https://snyk.io/test/npm/ejs/badge.svg?style=flat" /></a><a class="headerlink" href="#embedded-javascript-templates" title="Permalink to this heading"></a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>ejs
</pre></div>
</div>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Control flow with <code class="docutils literal notranslate"><span class="pre">&lt;%</span> <span class="pre">%&gt;</span></code></p></li>
<li><p>Escaped output with <code class="docutils literal notranslate"><span class="pre">&lt;%=</span> <span class="pre">%&gt;</span></code> (escape function configurable)</p></li>
<li><p>Unescaped raw output with <code class="docutils literal notranslate"><span class="pre">&lt;%-</span> <span class="pre">%&gt;</span></code></p></li>
<li><p>Newline-trim mode (‘newline slurping’) with <code class="docutils literal notranslate"><span class="pre">-%&gt;</span></code> ending tag</p></li>
<li><p>Whitespace-trim mode (slurp all whitespace) for control flow with <code class="docutils literal notranslate"><span class="pre">&lt;%_</span> <span class="pre">_%&gt;</span></code></p></li>
<li><p>Custom delimiters (e.g. <code class="docutils literal notranslate"><span class="pre">[?</span> <span class="pre">?]</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&lt;%</span> <span class="pre">%&gt;</span></code>)</p></li>
<li><p>Includes</p></li>
<li><p>Client-side support</p></li>
<li><p>Static caching of intermediate JavaScript</p></li>
<li><p>Static caching of templates</p></li>
<li><p>Complies with the <a class="reference external" href="http://expressjs.com">Express</a> view system</p></li>
</ul>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h2>
<div class="highlight-ejs notranslate"><div class="highlight"><pre><span></span>&lt;% if (user) { %&gt;
  &lt;h2&gt;&lt;%= user.name %&gt;&lt;/h2&gt;
&lt;% } %&gt;
</pre></div>
</div>
<p>Try EJS online at: https://ionicabizau.github.io/ejs-playground/.</p>
</section>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this heading"></a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ejs</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">);</span>
<span class="nx">template</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// =&gt; Rendered HTML string</span>

<span class="nx">ejs</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">);</span>
<span class="c1">// =&gt; Rendered HTML string</span>

<span class="nx">ejs</span><span class="p">.</span><span class="nx">renderFile</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">str</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// str =&gt; Rendered HTML string</span>
<span class="p">});</span>
</pre></div>
</div>
<p>It is also possible to use <code class="docutils literal notranslate"><span class="pre">ejs.render(dataAndOptions);</span></code> where you pass
everything in a single object. In that case, you’ll end up with local variables
for all the passed options. However, be aware that your code could break if we
add an option with the same name as one of your data object’s properties.
Therefore, we do not recommend using this shortcut.</p>
<section id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cache</span></code>                 Compiled functions are cached, requires <code class="docutils literal notranslate"><span class="pre">filename</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>              The name of the file being rendered. Not required if you
are using <code class="docutils literal notranslate"><span class="pre">renderFile()</span></code>. Used by <code class="docutils literal notranslate"><span class="pre">cache</span></code> to key caches, and for includes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root</span></code>                  Set project root for includes with an absolute path (e.g, /file.ejs).
Can be array to try to resolve include from multiple directories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views</span></code>                 An array of paths to use when resolving includes with relative paths.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">context</span></code>               Function execution context</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compileDebug</span></code>          When <code class="docutils literal notranslate"><span class="pre">false</span></code> no debug instrumentation is compiled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>                When <code class="docutils literal notranslate"><span class="pre">true</span></code>, compiles a function that can be rendered
in the browser without needing to load the EJS Runtime
(<a class="reference external" href="https://github.com/mde/ejs/releases/latest">ejs.min.js</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delimiter</span></code>             Character to use for inner delimiter, by default ‘%’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openDelimiter</span></code>         Character to use for opening delimiter, by default ‘&lt;’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">closeDelimiter</span></code>        Character to use for closing delimiter, by default ‘&gt;’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code>                 Outputs generated function body</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strict</span></code>                When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, generated function is in strict mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_with</span></code>                 Whether or not to use <code class="docutils literal notranslate"><span class="pre">with()</span> <span class="pre">{}</span></code> constructs. If <code class="docutils literal notranslate"><span class="pre">false</span></code>
then the locals will be stored in the <code class="docutils literal notranslate"><span class="pre">locals</span></code> object. Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> in strict mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">destructuredLocals</span></code>    An array of local variables that are always destructured from
the locals object, available even in strict mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">localsName</span></code>            Name to use for the object storing local variables when not using
<code class="docutils literal notranslate"><span class="pre">with</span></code> Defaults to <code class="docutils literal notranslate"><span class="pre">locals</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rmWhitespace</span></code>          Remove all safe-to-remove whitespace, including leading
and trailing whitespace. It also enables a safer version of <code class="docutils literal notranslate"><span class="pre">-%&gt;</span></code> line
slurping for all scriptlet tags (it does not strip new lines of tags in
the middle of a line).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">escape</span></code>                The escaping function used with <code class="docutils literal notranslate"><span class="pre">&lt;%=</span></code> construct. It is
used in rendering and is <code class="docutils literal notranslate"><span class="pre">.toString()</span></code>ed in the generation of client functions.
(By default escapes XML).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputFunctionName</span></code>    Set to a string (e.g., ‘echo’ or ‘print’) for a function to print
output inside scriptlet tags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span></code>                 When <code class="docutils literal notranslate"><span class="pre">true</span></code>, EJS will use an async function for rendering. (Depends
on async/await support in the JS runtime.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">includer</span></code>              Custom function to handle EJS includes, receives <code class="docutils literal notranslate"><span class="pre">(originalPath,</span> <span class="pre">parsedPath)</span></code>
parameters, where <code class="docutils literal notranslate"><span class="pre">originalPath</span></code> is the path in include as-is and <code class="docutils literal notranslate"><span class="pre">parsedPath</span></code> is the
previously resolved path. Should return an object <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">filename,</span> <span class="pre">template</span> <span class="pre">}</span></code>,
you may return only one of the properties, where <code class="docutils literal notranslate"><span class="pre">filename</span></code> is the final parsed path and <code class="docutils literal notranslate"><span class="pre">template</span></code>
is the included content.</p></li>
</ul>
<p>This project uses <a class="reference external" href="http://usejsdoc.org/">JSDoc</a>. For the full public API
documentation, clone the repository and run <code class="docutils literal notranslate"><span class="pre">jake</span> <span class="pre">doc</span></code>. This will run JSDoc
with the proper options and output the documentation to <code class="docutils literal notranslate"><span class="pre">out/</span></code>. If you want
the both the public &amp; private API docs, run <code class="docutils literal notranslate"><span class="pre">jake</span> <span class="pre">devdoc</span></code> instead.</p>
</section>
<section id="tags">
<h3>Tags<a class="headerlink" href="#tags" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;%</span></code>              ‘Scriptlet’ tag, for control-flow, no output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;%_</span></code>             ‘Whitespace Slurping’ Scriptlet tag, strips all whitespace before it</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;%=</span></code>             Outputs the value into the template (escaped)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;%-</span></code>             Outputs the unescaped value into the template</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;%#</span></code>             Comment tag, no execution, no output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;%%</span></code>             Outputs a literal ‘&lt;%’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%%&gt;</span></code>             Outputs a literal ‘%&gt;’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%&gt;</span></code>              Plain ending tag</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-%&gt;</span></code>             Trim-mode (‘newline slurp’) tag, trims following newline</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_%&gt;</span></code>             ‘Whitespace Slurping’ ending tag, removes all whitespace after it</p></li>
</ul>
<p>For the full syntax documentation, please see <a class="reference external" href="https://github.com/mde/ejs/blob/master/docs/syntax.md">docs/syntax.md</a>.</p>
</section>
<section id="includes">
<h3>Includes<a class="headerlink" href="#includes" title="Permalink to this heading"></a></h3>
<p>Includes either have to be an absolute path, or, if not, are assumed as
relative to the template with the <code class="docutils literal notranslate"><span class="pre">include</span></code> call. For example if you are
including <code class="docutils literal notranslate"><span class="pre">./views/user/show.ejs</span></code> from <code class="docutils literal notranslate"><span class="pre">./views/users.ejs</span></code> you would
use <code class="docutils literal notranslate"><span class="pre">&lt;%-</span> <span class="pre">include('user/show')</span> <span class="pre">%&gt;</span></code>.</p>
<p>You must specify the <code class="docutils literal notranslate"><span class="pre">filename</span></code> option for the template with the <code class="docutils literal notranslate"><span class="pre">include</span></code>
call unless you are using <code class="docutils literal notranslate"><span class="pre">renderFile()</span></code>.</p>
<p>You’ll likely want to use the raw output tag (<code class="docutils literal notranslate"><span class="pre">&lt;%-</span></code>) with your include to avoid
double-escaping the HTML output.</p>
<div class="highlight-ejs notranslate"><div class="highlight"><pre><span></span>&lt;ul&gt;
  &lt;% users.forEach(function(user){ %&gt;
    &lt;%- include(&#39;user/show&#39;, {user: user}) %&gt;
  &lt;% }); %&gt;
&lt;/ul&gt;
</pre></div>
</div>
<p>Includes are inserted at runtime, so you can use variables for the path in the
<code class="docutils literal notranslate"><span class="pre">include</span></code> call (for example <code class="docutils literal notranslate"><span class="pre">&lt;%-</span> <span class="pre">include(somePath)</span> <span class="pre">%&gt;</span></code>). Variables in your
top-level data object are available to all your includes, but local variables
need to be passed down.</p>
<p>NOTE: Include preprocessor directives (<code class="docutils literal notranslate"><span class="pre">&lt;%</span> <span class="pre">include</span> <span class="pre">user/show</span> <span class="pre">%&gt;</span></code>) are
not supported in v3.0+.</p>
</section>
</section>
<section id="custom-delimiters">
<h2>Custom delimiters<a class="headerlink" href="#custom-delimiters" title="Permalink to this heading"></a></h2>
<p>Custom delimiters can be applied on a per-template basis, or globally:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">ejs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ejs&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;geddy&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;neil&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;alex&#39;</span><span class="p">];</span>

<span class="c1">// Just one template</span>
<span class="nx">ejs</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;[?= users.join(&quot; | &quot;); ?]&lt;/p&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">users</span><span class="o">:</span><span class="w"> </span><span class="nx">users</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nx">delimiter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">openDelimiter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">closeDelimiter</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;]&#39;</span><span class="p">});</span>
<span class="c1">// =&gt; &#39;&lt;p&gt;geddy | neil | alex&lt;/p&gt;&#39;</span>

<span class="c1">// Or globally</span>
<span class="nx">ejs</span><span class="p">.</span><span class="nx">delimiter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">;</span>
<span class="nx">ejs</span><span class="p">.</span><span class="nx">openDelimiter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;[&#39;</span><span class="p">;</span>
<span class="nx">ejs</span><span class="p">.</span><span class="nx">closeDelimiter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;]&#39;</span><span class="p">;</span>
<span class="nx">ejs</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;[?= users.join(&quot; | &quot;); ?]&lt;/p&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">users</span><span class="o">:</span><span class="w"> </span><span class="nx">users</span><span class="p">});</span>
<span class="c1">// =&gt; &#39;&lt;p&gt;geddy | neil | alex&lt;/p&gt;&#39;</span>
</pre></div>
</div>
<section id="caching">
<h3>Caching<a class="headerlink" href="#caching" title="Permalink to this heading"></a></h3>
<p>EJS ships with a basic in-process cache for caching the intermediate JavaScript
functions used to render templates. It’s easy to plug in LRU caching using
Node’s <code class="docutils literal notranslate"><span class="pre">lru-cache</span></code> library:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">ejs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ejs&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">LRU</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;lru-cache&#39;</span><span class="p">);</span>
<span class="nx">ejs</span><span class="p">.</span><span class="nx">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">LRU</span><span class="p">(</span><span class="mf">100</span><span class="p">);</span><span class="w"> </span><span class="c1">// LRU cache with 100-item limit</span>
</pre></div>
</div>
<p>If you want to clear the EJS cache, call <code class="docutils literal notranslate"><span class="pre">ejs.clearCache</span></code>. If you’re using the
LRU cache and need a different limit, simple reset <code class="docutils literal notranslate"><span class="pre">ejs.cache</span></code> to a new instance
of the LRU.</p>
</section>
<section id="custom-file-loader">
<h3>Custom file loader<a class="headerlink" href="#custom-file-loader" title="Permalink to this heading"></a></h3>
<p>The default file loader is <code class="docutils literal notranslate"><span class="pre">fs.readFileSync</span></code>, if you want to customize it, you can set ejs.fileLoader.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">ejs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ejs&#39;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">myFileLoad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">filePath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;myFileLoad: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">ejs</span><span class="p">.</span><span class="nx">fileLoader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">myFileLoad</span><span class="p">;</span>
</pre></div>
</div>
<p>With this feature, you can preprocess the template before reading it.</p>
</section>
<section id="layouts">
<h3>Layouts<a class="headerlink" href="#layouts" title="Permalink to this heading"></a></h3>
<p>EJS does not specifically support blocks, but layouts can be implemented by
including headers and footers, like so:</p>
<div class="highlight-ejs notranslate"><div class="highlight"><pre><span></span>&lt;%- include(&#39;header&#39;) -%&gt;
&lt;h1&gt;
  Title
&lt;/h1&gt;
&lt;p&gt;
  My page
&lt;/p&gt;
&lt;%- include(&#39;footer&#39;) -%&gt;
</pre></div>
</div>
</section>
</section>
<section id="client-side-support">
<h2>Client-side support<a class="headerlink" href="#client-side-support" title="Permalink to this heading"></a></h2>
<p>Go to the <a class="reference external" href="https://github.com/mde/ejs/releases/latest">Latest Release</a>, download
<code class="docutils literal notranslate"><span class="pre">./ejs.js</span></code> or <code class="docutils literal notranslate"><span class="pre">./ejs.min.js</span></code>. Alternately, you can compile it yourself by cloning
the repository and running <code class="docutils literal notranslate"><span class="pre">jake</span> <span class="pre">build</span></code> (or <code class="docutils literal notranslate"><span class="pre">$(npm</span> <span class="pre">bin)/jake</span> <span class="pre">build</span></code> if jake is
not installed globally).</p>
<p>Include one of these files on your page, and <code class="docutils literal notranslate"><span class="pre">ejs</span></code> should be available globally.</p>
<section id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;ejs.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">people</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;geddy&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;neil&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;alex&#39;</span><span class="p">],</span>
<span class="w">      </span><span class="nx">html</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ejs</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;&lt;%= people.join(&quot;, &quot;); %&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">people</span><span class="o">:</span><span class="w"> </span><span class="nx">people</span><span class="p">});</span>
<span class="w">  </span><span class="c1">// With jQuery:</span>
<span class="w">  </span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#output&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// Vanilla JS:</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">html</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="caveats">
<h3>Caveats<a class="headerlink" href="#caveats" title="Permalink to this heading"></a></h3>
<p>Most of EJS will work as expected; however, there are a few things to note:</p>
<ol class="arabic simple">
<li><p>Obviously, since you do not have access to the filesystem, <code class="docutils literal notranslate"><span class="pre">ejs.renderFile()</span></code> won’t work.</p></li>
<li><p>For the same reason, <code class="docutils literal notranslate"><span class="pre">include</span></code>s do not work unless you use an <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">callback</span></code>. Here is an example:</p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello &lt;%= include(&#39;file&#39;, {person: &#39;John&#39;}); %&gt;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ejs</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">client</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span>

<span class="nx">fn</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span><span class="w"> </span><span class="nx">d</span><span class="p">){</span><span class="w"> </span><span class="c1">// include callback</span>
<span class="w">  </span><span class="c1">// path -&gt; &#39;file&#39;</span>
<span class="w">  </span><span class="c1">// d -&gt; {person: &#39;John&#39;}</span>
<span class="w">  </span><span class="c1">// Put your code here</span>
<span class="w">  </span><span class="c1">// Return the contents of file as a string</span>
<span class="p">});</span><span class="w"> </span><span class="c1">// returns rendered string</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://github.com/mde/ejs/tree/master/examples">examples folder</a> for more details.</p>
</section>
</section>
<section id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Permalink to this heading"></a></h2>
<p>EJS ships with a full-featured CLI. Options are similar to those used in JavaScript code:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">/</span> <span class="pre">--output-file</span> <span class="pre">FILE</span></code>            Write the rendered output to FILE rather than stdout.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">/</span> <span class="pre">--data-file</span> <span class="pre">FILE</span></code>              Must be JSON-formatted. Use parsed input from FILE as data for rendering.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">/</span> <span class="pre">--data-input</span> <span class="pre">STRING</span></code>           Must be JSON-formatted and URI-encoded. Use parsed input from STRING as data for rendering.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">/</span> <span class="pre">--delimiter</span> <span class="pre">CHARACTER</span></code>         Use CHARACTER with angle brackets for open/close (defaults to %).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">/</span> <span class="pre">--open-delimiter</span> <span class="pre">CHARACTER</span></code>    Use CHARACTER instead of left angle bracket to open.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-c</span> <span class="pre">/</span> <span class="pre">--close-delimiter</span> <span class="pre">CHARACTER</span></code>   Use CHARACTER instead of right angle bracket to close.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">/</span> <span class="pre">--strict</span></code>                      When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, generated function is in strict mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">/</span> <span class="pre">--no-with</span></code>                     Use ‘locals’ object for vars rather than using <code class="docutils literal notranslate"><span class="pre">with</span></code> (implies –strict).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-l</span> <span class="pre">/</span> <span class="pre">--locals-name</span></code>                 Name to use for the object storing local variables when not using <code class="docutils literal notranslate"><span class="pre">with</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-w</span> <span class="pre">/</span> <span class="pre">--rm-whitespace</span></code>               Remove all safe-to-remove whitespace, including leading and trailing whitespace.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">/</span> <span class="pre">--debug</span></code>                       Outputs generated function body</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-h</span> <span class="pre">/</span> <span class="pre">--help</span></code>                        Display this help message.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-V/v</span> <span class="pre">/</span> <span class="pre">--version</span></code>                   Display the EJS version.</p></li>
</ul>
<p>Here are some examples of usage:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ejs<span class="w"> </span>-p<span class="w"> </span><span class="o">[</span><span class="w"> </span>-c<span class="w"> </span><span class="o">]</span><span class="w"> </span>./template_file.ejs<span class="w"> </span>-o<span class="w"> </span>./output.html
$<span class="w"> </span>ejs<span class="w"> </span>./test/fixtures/user.ejs<span class="w"> </span><span class="nv">name</span><span class="o">=</span>Lerxst
$<span class="w"> </span>ejs<span class="w"> </span>-n<span class="w"> </span>-l<span class="w"> </span>_<span class="w"> </span>./some_template.ejs<span class="w"> </span>-f<span class="w"> </span>./data_file.json
</pre></div>
</div>
<section id="data-input">
<h3>Data input<a class="headerlink" href="#data-input" title="Permalink to this heading"></a></h3>
<p>There is a variety of ways to pass the CLI data for rendering.</p>
<p>Stdin:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./test/fixtures/user_data.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>ejs<span class="w"> </span>./test/fixtures/user.ejs
$<span class="w"> </span>ejs<span class="w"> </span>./test/fixtures/user.ejs<span class="w"> </span>&lt;<span class="w"> </span>test/fixtures/user_data.json
</pre></div>
</div>
<p>A data file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ejs<span class="w"> </span>./test/fixtures/user.ejs<span class="w"> </span>-f<span class="w"> </span>./user_data.json
</pre></div>
</div>
<p>A command-line option (must be URI-encoded):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./bin/cli.js<span class="w"> </span>-i<span class="w"> </span>%7B%22name%22%3A%20%22foo%22%7D<span class="w"> </span>./test/fixtures/user.ejs
</pre></div>
</div>
<p>Or, passing values directly at the end of the invocation:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./bin/cli.js<span class="w"> </span>-m<span class="w"> </span>$<span class="w"> </span>./test/fixtures/user.ejs<span class="w"> </span><span class="nv">name</span><span class="o">=</span>foo
</pre></div>
</div>
</section>
<section id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this heading"></a></h3>
<p>The CLI by default send output to stdout, but you can use the <code class="docutils literal notranslate"><span class="pre">-o</span></code> or <code class="docutils literal notranslate"><span class="pre">--output-file</span></code>
flag to specify a target file to send the output to.</p>
</section>
</section>
<section id="ide-integration-with-syntax-highlighting">
<h2>IDE Integration with Syntax Highlighting<a class="headerlink" href="#ide-integration-with-syntax-highlighting" title="Permalink to this heading"></a></h2>
<p>VSCode:Javascript EJS by <em>DigitalBrainstem</em></p>
</section>
<section id="related-projects">
<h2>Related projects<a class="headerlink" href="#related-projects" title="Permalink to this heading"></a></h2>
<p>There are a number of implementations of EJS:</p>
<ul class="simple">
<li><p>TJ’s implementation, the v1 of this library: https://github.com/tj/ejs</p></li>
<li><p>EJS Embedded JavaScript Framework on Google Code: https://code.google.com/p/embeddedjavascript/</p></li>
<li><p>Sam Stephenson’s Ruby implementation: https://rubygems.org/gems/ejs</p></li>
<li><p>Erubis, an ERB implementation which also runs JavaScript: http://www.kuwata-lab.com/erubis/users-guide.04.html#lang-javascript</p></li>
<li><p>DigitalBrainstem EJS Language support: https://github.com/Digitalbrainstem/ejs-grammar</p></li>
</ul>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading"></a></h2>
<p>Licensed under the Apache License, Version 2.0
(<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>)</p>
<hr class="docutils" />
<p>EJS Embedded JavaScript templates copyright 2112
mde&#64;fleegix.org.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, MirRoR4s.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>